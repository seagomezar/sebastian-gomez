
<!DOCTYPE html>
<html lang="es">
    
<head><link rel=manifest href=/manifest.json>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Sebastian Gomez">
    <title>Implementando map como operador en Observables - Sebastian Gomez</title>
    <meta name="author" content="Sebastian Gomez">
    
        <meta name="keywords" content="Javascript,Angular,Desarrollo Web,Firebase,Rx.js,Ionic,">
    
    
        <link rel="icon" href="https://sebastian-gomez.com/assets/images/FaviconSG.png">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Sebastian Gomez","sameAs":["https://github.com/seagomezar","https://twitter.com/sebasgojs","https://plus.google.com/u/1/+SebastianGomezFrontEnd","https://www.linkedin.com/profile/sebastian-gomez-frontend/"],"image":"me.jpg"},"articleBody":"\nEn el post anterior tuvimos un primer acercamiento a la definición más pura de lo que es un Observable y lo implementamos desde cero similarmente a como lo hace RX.js. En este post vamos a valernos de esta definición para aumentar el número de operadores que podemos implementar y usar dentro de un Observable. Primero recordemos cual es la definición más pura de un observable con una función generadora de observables a partir de eventos:\njs12345678910111213141516171819class Observable {    constructor(subscribe) {    this._subscribe = subscribe;  }  subscribe(observer) {    return this._subscribe(observer);  }  static fromEvent(domElement, eventName) {    return new Observable(function subscribe(observer) {      const handler = ev =&gt; { observer.next(ev) };      domElement.addEventListener(eventName, handler);      return {        unsubscribe() {          domElement.removeEventListener(eventName, handler);        }      }    });  }}\nDe esta manera tu puedes crear Observables que te devolverán información del evento de la siguiente manera:js123456789const button = document.getElementById(\"button\");const clicks = Observable.fromEvent(button, \"click\");const clicksSubscription = clicks.subscribe({  next(e) {    console.log(\"Click in the button”, e); // “e” contiene toda la información del evento  }});clicksSubscription.unsubscribe(); // De esta manera te puedes des-suscribir\nSin embargo es probable que necesitemos hacer más operaciones sobre la cadena de datos, imagínate si quizá requiramos solamente obtener sólo algunos datos del evento por ejemplo solo la posición del Mouse. O imagínate si sólo queremos escuchar por los clicks que se hagan en la parte izquierda del botón. Pues bien vamos a implementar dos funciones que quizá ya conozcas porque se usan principalmente para el procesamiento de arrays. Vamos a implementar la función “map” sobre observables. Pero antes veamos un ejemplo sobre como es su funcionamiento sobre Arrays en javascript para luego traerlo a nuestra definición de observables e implementarlo allí.\nEmpecemos con la función map. La función map es una función pura que itera sobre cada elemento de un array y “mapea” cada item de un array en otro. Veamos un ejemplo:\njs12[1, 2, 3\\].map( elemento =&gt; elemento * 2); // Retorna [1, 4, 6]\nAhora bien ¿Como hace internamente esta función para retornar este resultado? Básicamente la función map recibe como parámetro una función de proyección o transformación y aplica dicha función a cada uno de los elementos que pasan como parámetro. Esto hace que sin afectar el array original pueda devolver en nuevo arreglo con la función de proyección aplicada a cada item dentro del array. Veamos como sería la implementación de la función map para arrays:\njs1234567Array.prototype.map = function(projectionFunction) {  const results = [];  this.forEach(function(itemInArray) {    results.push(projectionFunction(itemInArray));  });  return results;};\n¿Hermosa no? Ahora que te parece si nos arriesgamos a escribir lo mismo para observables. Similarmente que para arreglos, vamos a necesitar como parámetro una función de proyección que nos permita transformar cada valor que retorna el observable. Adicionalmente queremos retornar un observable también al que nos podamos subscribir. Empecemos por solo esas dos cosas que te acabó de decir:\njs123456789101112131415161718class Observable {    …  map(projectionFunction) {    const self = this;    return new Observable(function subscribe(observer) {      const subscription = self.subscribe({        next(v) {        },        error (e) {        },        complete () {        }      });      return subscription;    });  }  …}\nSimple, ¿no? Como verás hemos definido la función map que ya no es “static” ya que no se puede aplicar sobre la definición abstracta de Observable sino sobre instancias de dicha clase. Adicionalmente recibimos como parámetro una función de proyección que es la que transformará cada valor que retorne la función interna next, y finalmente retornamos la subscripción para que sea posible suscribirnos al observable que justo acabamos de crear. Veamos entonces como podemos aplicar la función de proyección a cada elemento que retornemos dentro de la función next.\njs1234567891011121314151617181920class Observable {    …  map(projectionFunction) {    const self = this;    return new Observable(function subscribe(observer) {      const subscription = self.subscribe({        next(v) {            const value = projectionFunction(v);            observer.next(value);        },        error (e) {        },        complete () {        }      });      return subscription;    });  }  …}\nComo ves no hicimos otra cosa que usar la función de transformación sobre cada valor que queremos enviar al observador. Eso es todo!, esta definida nuestra función map dentro de la definición que tenemos de Observable. Ajustemos un poco más esta definición previniendo posibles errores inesperados:\njs1234567891011121314151617181920212223242526272829class Observable {    …  map(projection) {    const self = this;    return new Observable(function subscribe(observer) {      const subscription = self.subscribe({        next(v) {          let value;          try {            value = projection(v);            observer.next(value);          }          catch(e) {            observer.error(e);            subscription.unsubscribe();          }        },        error (e) {          observer.error(e);        },        complete () {          observer.complete();        }      });      return subscription;    });  }  …}\nCon lo anterior queda completa nuestra función map en la definición de observable. Veamos ahora como podemos usarla para transformar los datos dentro de nuestro observable, obteniendo solamente la posición del mouse en el momento que hizo click sobre el botón.\njs1234567const button = document.getElementById(\"button\");const clicks = Observable.fromEvent(button, \"click\");const clicksSubscription = clicks.map(ev =&gt;ev.offsetX).subscribe({  next(offSetX) {    console.log(offSetX);  }});\nEn el siguiente Codepen podrás revisar la definición completa:\n\nhttps://codepen.io/seagomezar/pen/zpgROb\n\nEso es todo, espero que este post te sea de utilidad y lo puedas aplicar a algún proyecto que tengas en mente y que simplemente te haya ayudado a entender la naturaleza del operador map sobre observables. déjame un comentario si lograste implementarlo, si quieres añadir alguna otra funcionalidad o si tienes alguna duda no dudes en dejarme un comentario en la parte de abajo, recuerda que si te gustó también puedes compartir usando los links a las redes sociales en la parte de abajo.","dateCreated":"2018-03-20T06:47:44-05:00","dateModified":"2018-05-24T09:08:40-05:00","datePublished":"2018-03-20T06:47:44-05:00","description":"En este post vamos a valernos de esta definición para aumentar el número de operadores que podemos implementar y usar dentro de un Observable.","headline":"Implementando map como operador en Observables","image":["https://storage.googleapis.com/sebastian-gomez-blog.appspot.com/uploads/2018/03/984368.png?w=400&ssl=1"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://sebastian-gomez.com/implementando-map-como-operador-en-observables/"},"publisher":{"@type":"Organization","name":"Sebastian Gomez","sameAs":["https://github.com/seagomezar","https://twitter.com/sebasgojs","https://plus.google.com/u/1/+SebastianGomezFrontEnd","https://www.linkedin.com/profile/sebastian-gomez-frontend/"],"image":"me.jpg","logo":{"@type":"ImageObject","url":"me.jpg"}},"url":"https://sebastian-gomez.com/implementando-map-como-operador-en-observables/","keywords":"Desarrollo Web, Javascript, Programación Reactiva","thumbnailUrl":"https://storage.googleapis.com/sebastian-gomez-blog.appspot.com/uploads/2018/03/984368.png?w=400&ssl=1"}</script>
    <meta name="description" content="En este post vamos a valernos de esta definición para aumentar el número de operadores que podemos implementar y usar dentro de un Observable.">
<meta name="keywords" content="Desarrollo Web,Javascript,Programación Reactiva">
<meta property="og:type" content="blog">
<meta property="og:title" content="Implementando map como operador en Observables">
<meta property="og:url" content="https://sebastian-gomez.com/implementando-map-como-operador-en-observables/index.html">
<meta property="og:site_name" content="Sebastian Gomez">
<meta property="og:description" content="En este post vamos a valernos de esta definición para aumentar el número de operadores que podemos implementar y usar dentro de un Observable.">
<meta property="og:locale" content="es">
<meta property="og:updated_time" content="2018-05-24T14:08:40.990Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Implementando map como operador en Observables">
<meta name="twitter:description" content="En este post vamos a valernos de esta definición para aumentar el número de operadores que podemos implementar y usar dentro de un Observable.">
<meta name="twitter:creator" content="@sebasgojs">
    
        <link rel="publisher" href="https://plus.google.com/+SebastianGomezFrontEnd"/>
    
    
        
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/935bc41cc7c9a331454ad5f59e40ca45?s=640"/>
    
    
        <meta property="og:image" content="https://storage.googleapis.com/sebastian-gomez-blog.appspot.com/uploads/2018/03/984368.png?w=400&amp;ssl=1"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://storage.googleapis.com/sebastian-gomez-blog.appspot.com/uploads/2018/03/984368.png?w=400&amp;ssl=1" />
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-5pavynit182cxzgycpqavetpez2yhfpthd7iavub2bczfzdrk7zx7lnrfejr.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-63483506-1', 'auto');
        ga('send', 'pageview');
    </script>


    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Sebastian Gomez</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="https://www.gravatar.com/avatar/935bc41cc7c9a331454ad5f59e40ca45?s=90" alt="Foto de autor"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/935bc41cc7c9a331454ad5f59e40ca45?s=110" alt="Foto de autor"/>
                </a>
                <h4 class="sidebar-profile-name">Sebastian Gomez</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Mi nombre es Sebastián Gómez, soy ingeniero de sistemas e Informática y Magister en Ingeniería de Sistemas de la Universidad Nacional de Colombia. Actualmente trabajo en Globant como Web UI Developer con énfasis en aplicaciones híbridas y cross compiladas. Soy el organizador del Google Developers Group de Medellín, así que contactame si quieres dar alguna charla o participar actuamente de esta comunidad.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Inicio"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Inicio</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                            title="Categorías"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categorías</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                            title="Etiquetas"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Etiquetas</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                            title="Archivos"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archivos</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-google-search"
                             href="#search"
                            
                            title="Buscar"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Buscar</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="Sobre mí"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Sobre mí</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/seagomezar" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://twitter.com/sebasgojs" target="_blank" rel="noopener" title="Twitter">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://plus.google.com/u/1/+SebastianGomezFrontEnd" target="_blank" rel="noopener" title="Google Plus">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google Plus</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.linkedin.com/profile/sebastian-gomez-frontend/" target="_blank" rel="noopener" title="LinkedIn">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                            title="RSS"
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Implementando map como operador en Observables
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2018-03-20T06:47:44-05:00">
	
		    20 mar. 2018
    	
    </time>
    
        <span>en </span>
        
    <a class="category-link" href="/categories/Javascript/">Javascript</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- excerpt --></p>
<p>En el <a href="https://www.sebastian-gomez.com/desarrollo-web/implementando-observables-a-partir-de-eventos-en-js/" target="_blank" rel="noopener">post anterior</a> tuvimos un primer acercamiento a la definición más pura de lo que es un Observable y lo implementamos desde cero similarmente a como lo hace RX.js. En este post vamos a valernos de esta definición para aumentar el número de operadores que podemos implementar y usar dentro de un Observable. Primero recordemos cual es la definición más pura de un observable con una función generadora de observables a partir de eventos:</p>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">js</li></ul></figcaption><div class="tabs-content"><figure class="highlight js" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observable</span> </span>{  </span><br><span class="line">  <span class="keyword">constructor</span>(subscribe) {</span><br><span class="line">    <span class="keyword">this</span>._subscribe = subscribe;</span><br><span class="line">  }</span><br><span class="line">  subscribe(observer) {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._subscribe(observer);</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">static</span> fromEvent(domElement, eventName) {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Observable(<span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">observer</span>) </span>{</span><br><span class="line">      <span class="keyword">const</span> handler = <span class="function"><span class="params">ev</span> =&gt;</span> { observer.next(ev) };</span><br><span class="line">      domElement.addEventListener(eventName, handler);</span><br><span class="line">      <span class="keyword">return</span> {</span><br><span class="line">        unsubscribe() {</span><br><span class="line">          domElement.removeEventListener(eventName, handler);</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>
<p>De esta manera tu puedes crear Observables que te devolverán información del evento de la siguiente manera:<br><figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">js</li></ul></figcaption><div class="tabs-content"><figure class="highlight js" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> button = <span class="built_in">document</span>.getElementById(<span class="string">"button"</span>);</span><br><span class="line"><span class="keyword">const</span> clicks = Observable.fromEvent(button, <span class="string">"click"</span>);</span><br><span class="line"><span class="keyword">const</span> clicksSubscription = clicks.subscribe({</span><br><span class="line">  next(e) {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Click in the button”, e); // “e” contiene toda la información del evento</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">});</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">clicksSubscription.unsubscribe(); // De esta manera te puedes des-suscribir</span></span><br></pre></td></tr></tbody></table></figure></div></figure></p>
<p>Sin embargo es probable que necesitemos hacer más operaciones sobre la cadena de datos, imagínate si quizá requiramos solamente obtener sólo algunos datos del evento por ejemplo solo la posición del Mouse. O imagínate si sólo queremos escuchar por los clicks que se hagan en la parte izquierda del botón. Pues bien vamos a implementar dos funciones que quizá ya conozcas porque se usan principalmente para el procesamiento de arrays. Vamos a implementar la función “map” sobre observables. Pero antes veamos un ejemplo sobre como es su funcionamiento sobre Arrays en javascript para luego traerlo a nuestra definición de observables e implementarlo allí.</p>
<p>Empecemos con la función map. La función map es una función pura que itera sobre cada elemento de un array y “mapea” cada item de un array en otro. Veamos un ejemplo:</p>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">js</li></ul></figcaption><div class="tabs-content"><figure class="highlight js" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>\].map( <span class="function"><span class="params">elemento</span> =&gt;</span> elemento * <span class="number">2</span>); </span><br><span class="line"><span class="comment">// Retorna [1, 4, 6]</span></span><br></pre></td></tr></tbody></table></figure></div></figure>
<p>Ahora bien ¿Como hace internamente esta función para retornar este resultado? Básicamente la función map recibe como parámetro una función de proyección o transformación y aplica dicha función a cada uno de los elementos que pasan como parámetro. Esto hace que sin afectar el array original pueda devolver en nuevo arreglo con la función de proyección aplicada a cada item dentro del array. Veamos como sería la implementación de la función map para arrays:</p>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">js</li></ul></figcaption><div class="tabs-content"><figure class="highlight js" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.map = <span class="function"><span class="keyword">function</span>(<span class="params">projectionFunction</span>) </span>{</span><br><span class="line">  <span class="keyword">const</span> results = [];</span><br><span class="line">  <span class="keyword">this</span>.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">itemInArray</span>) </span>{</span><br><span class="line">    results.push(projectionFunction(itemInArray));</span><br><span class="line">  });</span><br><span class="line">  <span class="keyword">return</span> results;</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure></div></figure>
<p>¿Hermosa no? Ahora que te parece si nos arriesgamos a escribir lo mismo para observables. Similarmente que para arreglos, vamos a necesitar como parámetro una función de proyección que nos permita transformar cada valor que retorna el observable. Adicionalmente queremos retornar un observable también al que nos podamos subscribir. Empecemos por solo esas dos cosas que te acabó de decir:</p>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">js</li></ul></figcaption><div class="tabs-content"><figure class="highlight js" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observable</span> </span>{  </span><br><span class="line">  …</span><br><span class="line">  map(projectionFunction) {</span><br><span class="line">    <span class="keyword">const</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Observable(<span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">observer</span>) </span>{</span><br><span class="line">      <span class="keyword">const</span> subscription = self.subscribe({</span><br><span class="line">        next(v) {</span><br><span class="line">        },</span><br><span class="line">        error (e) {</span><br><span class="line">        },</span><br><span class="line">        complete () {</span><br><span class="line">        }</span><br><span class="line">      });</span><br><span class="line">      <span class="keyword">return</span> subscription;</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line">  …</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>
<p>Simple, ¿no? Como verás hemos definido la función map que ya no es “static” ya que no se puede aplicar sobre la definición abstracta de Observable sino sobre instancias de dicha clase. Adicionalmente recibimos como parámetro una función de proyección que es la que transformará cada valor que retorne la función interna next, y finalmente retornamos la subscripción para que sea posible suscribirnos al observable que justo acabamos de crear. Veamos entonces como podemos aplicar la función de proyección a cada elemento que retornemos dentro de la función next.</p>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">js</li></ul></figcaption><div class="tabs-content"><figure class="highlight js" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observable</span> </span>{  </span><br><span class="line">  …</span><br><span class="line">  map(projectionFunction) {</span><br><span class="line">    <span class="keyword">const</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Observable(<span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">observer</span>) </span>{</span><br><span class="line">      <span class="keyword">const</span> subscription = self.subscribe({</span><br><span class="line">        next(v) {</span><br><span class="line">            <span class="keyword">const</span> value = projectionFunction(v);</span><br><span class="line">            observer.next(value);</span><br><span class="line">        },</span><br><span class="line">        error (e) {</span><br><span class="line">        },</span><br><span class="line">        complete () {</span><br><span class="line">        }</span><br><span class="line">      });</span><br><span class="line">      <span class="keyword">return</span> subscription;</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line">  …</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>
<p>Como ves no hicimos otra cosa que usar la función de transformación sobre cada valor que queremos enviar al observador. Eso es todo!, esta definida nuestra función map dentro de la definición que tenemos de Observable. Ajustemos un poco más esta definición previniendo posibles errores inesperados:</p>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">js</li></ul></figcaption><div class="tabs-content"><figure class="highlight js" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observable</span> </span>{  </span><br><span class="line">  …</span><br><span class="line">  map(projection) {</span><br><span class="line">    <span class="keyword">const</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Observable(<span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">observer</span>) </span>{</span><br><span class="line">      <span class="keyword">const</span> subscription = self.subscribe({</span><br><span class="line">        next(v) {</span><br><span class="line">          <span class="keyword">let</span> value;</span><br><span class="line">          <span class="keyword">try</span> {</span><br><span class="line">            value = projection(v);</span><br><span class="line">            observer.next(value);</span><br><span class="line">          }</span><br><span class="line">          <span class="keyword">catch</span>(e) {</span><br><span class="line">            observer.error(e);</span><br><span class="line">            subscription.unsubscribe();</span><br><span class="line">          }</span><br><span class="line">        },</span><br><span class="line">        error (e) {</span><br><span class="line">          observer.error(e);</span><br><span class="line">        },</span><br><span class="line">        complete () {</span><br><span class="line">          observer.complete();</span><br><span class="line">        }</span><br><span class="line">      });</span><br><span class="line">      <span class="keyword">return</span> subscription;</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line">  …</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div></figure>
<p>Con lo anterior queda completa nuestra función map en la definición de observable. Veamos ahora como podemos usarla para transformar los datos dentro de nuestro observable, obteniendo solamente la posición del mouse en el momento que hizo click sobre el botón.</p>
<figure class="codeblock codeblock--tabbed"><figcaption><ul class="tabs"><li class="tab active">js</li></ul></figcaption><div class="tabs-content"><figure class="highlight js" style="display: block;"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> button = <span class="built_in">document</span>.getElementById(<span class="string">"button"</span>);</span><br><span class="line"><span class="keyword">const</span> clicks = Observable.fromEvent(button, <span class="string">"click"</span>);</span><br><span class="line"><span class="keyword">const</span> clicksSubscription = clicks.map(<span class="function"><span class="params">ev</span> =&gt;</span>ev.offsetX).subscribe({</span><br><span class="line">  next(offSetX) {</span><br><span class="line">    <span class="built_in">console</span>.log(offSetX);</span><br><span class="line">  }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure></div></figure>
<p>En el siguiente Codepen podrás revisar la definición completa:</p>
<ul>
<li><a href="https://codepen.io/seagomezar/pen/zpgROb?editors=1011" target="_blank" rel="noopener">https://codepen.io/seagomezar/pen/zpgROb</a></li>
</ul>
<p>Eso es todo, espero que este post te sea de utilidad y lo puedas aplicar a algún proyecto que tengas en mente y que simplemente te haya ayudado a entender la naturaleza del operador map sobre observables. déjame un comentario si lograste implementarlo, si quieres añadir alguna otra funcionalidad o si tienes alguna duda no dudes en dejarme un comentario en la parte de abajo, recuerda que si te gustó también puedes compartir usando los links a las redes sociales en la parte de abajo.</p>
            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">ETIQUETADO EN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Desarrollo-Web/">Desarrollo Web</a> <a class="tag tag--primary tag--small t-link" href="/tags/Javascript/">Javascript</a> <a class="tag tag--primary tag--small t-link" href="/tags/Programacion-Reactiva/">Programación Reactiva</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/implementando-filter-como-operador-en-observables/" data-tooltip="Implementando filter como operador en Observables" aria-label="ANTERIOR: Implementando filter como operador en Observables">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">ANTERIOR</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/implementando-observables-a-partir-de-eventos-en-js/" data-tooltip="Implementando Observables a partir de Eventos en JS" aria-label="SIGUIENTE: Implementando Observables a partir de Eventos en JS">
                
                    <span class="hide-xs hide-sm text-small icon-mr">SIGUIENTE</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://sebastian-gomez.com/implementando-map-como-operador-en-observables/" title="Compartir en Facebook">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://sebastian-gomez.com/implementando-map-como-operador-en-observables/" title="Compartir en Twitter">
                    <i class="fa fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://sebastian-gomez.com/implementando-map-como-operador-en-observables/" title="Compartir en Google+">
                    <i class="fa fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment-o"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 Sebastian Gomez. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/implementando-filter-como-operador-en-observables/" data-tooltip="Implementando filter como operador en Observables" aria-label="ANTERIOR: Implementando filter como operador en Observables">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">ANTERIOR</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/implementando-observables-a-partir-de-eventos-en-js/" data-tooltip="Implementando Observables a partir de Eventos en JS" aria-label="SIGUIENTE: Implementando Observables a partir de Eventos en JS">
                
                    <span class="hide-xs hide-sm text-small icon-mr">SIGUIENTE</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://sebastian-gomez.com/implementando-map-como-operador-en-observables/" title="Compartir en Facebook">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://sebastian-gomez.com/implementando-map-como-operador-en-observables/" title="Compartir en Twitter">
                    <i class="fa fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://sebastian-gomez.com/implementando-map-como-operador-en-observables/" title="Compartir en Google+">
                    <i class="fa fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment-o"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <i id="btn-close-shareoptions" class="fa fa-close"></i>
    <ul class="share-options">
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://sebastian-gomez.com/implementando-map-como-operador-en-observables/">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i><span>Compartir en Facebook</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://sebastian-gomez.com/implementando-map-como-operador-en-observables/">
                    <i class="fa fa-twitter" aria-hidden="true"></i><span>Compartir en Twitter</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://sebastian-gomez.com/implementando-map-como-operador-en-observables/">
                    <i class="fa fa-google-plus" aria-hidden="true"></i><span>Compartir en Google+</span>
                </a>
            </li>
        
    </ul>
</div>

            
        </div>
        
    
        
            
                
    <div id="about">
        <div id="about-card">
            <div id="about-btn-close">
                <i class="fa fa-remove"></i>
            </div>
            <main id="main" class="site-main" role="main" style="margin-left: 1em; margin-right: 1em; line-height: 24px; text-rendering: optimizelegibility;">
                <article id="post-92" class="post-92 page type-page status-publish hentry">
                    <div class="post-inner-content well">
                        <header class="entry-header">
                            <h1 class="entry-title">Sobre mí</h1>
                        </header>
                        <!-- .entry-header -->
                        <div class="entry-content">
                            <p style="text-align: justify;">
                                <img
                                    src="../assets/images/me.png"
                                    alt="sebastian" width="205" height="300" srcset="../assets/images/me.png"
                                    sizes="(max-width: 205px) 100vw, 205px"
                                    style="float: left; margin-right: 1em;">Mi nombre es Sebastián Gómez, soy ingeniero de sistemas
                                e Informática y Magister en Ingeniería de Sistemas
                                de la Universidad Nacional de Colombia.</p>
                            <p style="text-align: justify;">Actualmente trabajo en
                                <a href="https://www.globant.com/">Globant</a> como Web UI Developer con énfasis en
                                aplicaciones híbridas y cross compiladas. Soy el
                                organizador del
                                <a href="https://www.meetup.com/es-ES/GDG-Medellin">Google Developers Group de Medellín</a>, así que
                                contactame si quieres dar alguna charla o participar
                                actuamente de esta comunidad.</p>
                            <p style="text-align: justify;">He participado en una Startup Colombiana&nbsp;llamada
                                SponzorMe al lado de
                                <a href="https://www.carlosrojasblog.com/">Carlos Rojas</a> y fuí participante de
                                <a href="http://www.startupchile.org/">Startup Chile</a>&nbsp;a pesar de no haber continuado
                                con esta startup me apasiona el emprendimiento y
                                me gusta aconsejar y ayudar startups como mentor
                                técnico. También he trabajado en empresas Americanas
                                como
                                <a href="https://studiohyperset.com/">StudioHyperset</a> en Estados Unidos y para
                                <a href="http://measuredmedium.com/">Measured Medium</a>. Mi interés y mi experiencia
                                es el desarrollo de web y móvil full stack como Front-end
                                con Javascript. Me apasiona desarrollar software,
                                escribir código&nbsp;y&nbsp;enseñar lo que aprendo
                                día a día.</p>
                            <p style="text-align: justify;">También he trabajado como profesor en diferentes universidades
                                en Medellín Colombia, con tematicas&nbsp;relacionadas
                                con la Inteligencia Artificial, Bases de datos, programación
                                orientada a objetos, minería de datos, desarrollo
                                de software, desarrollo móvil y desarrollo web.</p>
                            <p style="text-align: justify;">Me encanta escribir&nbsp;código rápido y prototipar de
                                una manera accelerada&nbsp;si quieres ver que&nbsp;hago
                                día a día puedes darle un vistazo a mi codepen:&nbsp;
                                <a
                                    href="https://codepen.io/seagomezar/">https://codepen.io/seagomezar/</a>.</p>
                            <p style="text-align: justify;">Todos los días trato de crear o participar en proyectos,
                                la mayoría open source, así que puede chequear mi
                                GitHub:&nbsp;
                                <a href="https://github.com/seagomezar">https://github.com/seagomezar</a>.</p>
                            <p style="text-align: justify;">Mi áreas de investigación académica&nbsp;son: Ingeniería
                                de software, Ingeniería de requisitos, procesamiento
                                del lenguaje natural, Ontologías, Bases De Datos,
                                &nbsp;Machine Learning, Seguimiento de trayectorias&nbsp;y
                                Modelamiento matemático de formaciones.</p>
                            <p style="text-align: justify;">Estas son algunas de mis publicaciones académicas mas
                                recientes:</p>
                            <ul>
                                <li style="text-align: left;">
                                    <a href="http://revistas.unipamplona.edu.co/ojs_viceinves/index.php/RCTA/article/view/288/361"
                                        target="_blank" rel="noopener">Caracterización de los elementos del diagrama
                                        de objetivos de KAOS a partir de lenguaje
                                        natural</a>
                                </li>
                                <li style="text-align: left;">
                                    <a href="http://www.redalyc.org/articulo.oa?id=47730923003"
                                        target="_blank" rel="noopener">Analysis and Detection in V-Formations with Outliers</a>
                                </li>
                                <li style="text-align: left;">
                                    <a href="http://www.hindawi.com/journals/aaa/2014/241684/"
                                        target="_blank" rel="noopener">Identification of V-Formations and Circular and
                                        Doughnut Formations in a Set of Moving Entities
                                        with Outliers</a>
                                </li>
                                <li style="text-align: left;">
                                    <a href="http://www.revistasiush.com/index.php/quid/article/download/71/33"
                                        target="_blank" rel="noopener">Using ontologies for disambiguation of software
                                        artifacts. in software requirements elicitation</a>
                                </li>
                                <li style="text-align: left;">
                                    <a href="http://www.scielo.cl/scielo.php?pid=S0718-33052015000100007&amp;script=sci_arttext&amp;tlng=e"
                                        target="_blank" rel="noopener">Extraction of goals and their classification
                                        in the KAOS model using natural&nbsp;language
                                        processing</a>
                                </li>
                                <li style="text-align: left;">
                                    <a href="http://link.springer.com/chapter/10.1007/978-3-319-06764-3_5#page-1"
                                        target="_blank" rel="noopener">Obtaining Agents and Entities from Natural Language</a>
                                </li>
                                <li style="text-align: left;">
                                    <a href="http://www.enggjournals.com/ijet/docs/IJET14-06-06-128.pdf">Filtering Word Senses Using the Least Squares
                                        Technique for Word Sense Disambiguation</a>
                                </li>
                                <li style="text-align: left;">
                                    <a href="http://revistavirtual.ucn.edu.co/index.php/RevistaUCN/article/view/707/1234">Un modelo de procesamiento de lenguaje natural
                                        para la&nbsp;detección de errores en requisitos
                                        de software</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- .entry-content -->
                </article>
                <!-- #post-## -->
            </main>
        </div>
    </div>
        
        
<div id="cover" style="background-image:url('/assets/images/cover-v1.2.0.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-9mnrhgp6lyjkxpqnqtuo1xev1egf2hnkbf3shwp4sqwnee1molrmgznbmvhm.min.js"></script>
<!--SCRIPTS END-->

    
        <script>
             var disqus_config = function () {
                 this.page.url = 'https://sebastian-gomez.com/implementando-map-como-operador-en-observables/';
                 
                    this.page.identifier = 'implementando-map-como-operador-en-observables/';
                 
             };
            (function() {
                var d = document, s = d.createElement('script');
                var disqus_shortname = 'sebastiangomez';
                s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
    



    <script>if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js?t=1539285734067')
    .then(function () {console.log('ServiceWorker Register Successfully.')})
    .catch(function (e) {console.error(e)});
}
</script></body>
</html>
